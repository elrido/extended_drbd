# Generated by Chef for <%= node[:fqdn] %>

global {
  usage-count no;
}
common {
  disk {
    on-io-error detach;
  }
  protocol C;
}
resource <%= @resource %> {
  on <%= @my_short_hostname %> {
    device    <%= node['drbd']['dev'] %>;
    disk      <%= node['drbd']['disk']['start']%><%=node['lvm']['vg_name']%><%=node['drbd']['mount'] %>;
    address   <%=@my_ip%>:<%= node['drbd']['port'] %>;
    meta-disk internal;
  }
  on <%= @partner_short_hostname %> {
    device    <%= node['drbd']['dev'] %>;
    disk      <%= node['drbd']['disk']['start']%><%=node['lvm']['vg_name']%><%=node['drbd']['mount'] %>;
    address   <%= @partner_ip %>:<%= node['drbd']['port'] %>;
    meta-disk internal;
  }
  syncer {
     rate <%= node['drbd']['syncrate']%>;
  }
}

